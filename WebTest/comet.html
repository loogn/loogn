<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link href="pure.css" rel="stylesheet" type="text/css" />
    <script src="jquery-1.10.2.min.js" type="text/javascript"></script>
    <style type="text/css">
        #friends
        {
            height: 500px;
            background: #212121;
            width: 150px;
            float: left;
        }
        #main
        {
            float: left;
        }
        .clear
        {
            clear: both;
            float: none;
        }
    </style>
</head>
<body>
    <div>
        <div id="friends">
            dddddd</div>
        <div id="main">
            ddddddd</div>
    </div>
    <div class="clear">
    </div>
    <input type="text" id="sessionId" /><input type="button" value="进入" onclick="comin()" /><br />
    <input type="text" id="message" /><input type="button" value="发送" onclick="send()" />
    <div id="messages">
    </div>
    <script type="text/javascript">
        function comin() {
            var url = "MyAsyncHandler.ashx";
            var xhr = $.ajax({
                url: url,
                cache: false,
                data: { sessionId: $("#sessionId").val() },
                success: function (data, textStatus) {
                    $("#messages").html($("#messages").html() + xhr.responseText + "<br/>");
                },
                complete: function (xhr) { xhr = null; Jcomin(); }
            });
        }

        function send() {
            var url = "MyHandler.ashx";
            $.ajax({
                url: url,
                cache: false,
                type: "POST",
                data: { sessionId: $("#sessionId").val(), message: $("#message").val() },
                complete: function (xhr) { xhr = null; }
            });
        }
    </script>
</body>
</html>
